스프링 핵심원리 - 기본편 3일차
==========

## xml을 사용한 스프링 빈 설정
- 현재는 거의 자바로 설정하지만 xml을 사용하여 거의 동일한 방식으로도 설정이 가능함 
- xml을 통하여 설정 시 컴파일없이 빈 설정 파일을 변경할 수 있다.

## 스프링 빈 메타 정보
- 자바든 xml이든 설정 코드를 작성하면 스프링 빈 메타 데이터를 생성하여 스프링 컨테이너에 넘겨주게 된다.
- beanDefinition을 통해 메타 데이터에 대한 정보를 확인할 수 있다.
  
</br>

-------------
## 싱글톤 패턴
- 클래스의 인스턴스가 1개만 생성되는 것을 보장하는 디자인 패턴
- private 생성자를 사용해서 외부에서 new 키워드를 통해 임의로 생성하는 것을 막아야함

```java
// static 메모리 영역에 자기 자신을 하나 미리 생성해둠
private static final SingletonService instance = new SingletonService();    

// 외부에서 인스턴스를 호출할 경우 해당 매서드만을 통하여 호출 가능
    public static SingletonService getInstance() {
        return instance;
    }
// 생성자를 private로 선언하여 외부에서 new를 통해 임의로 객체를 생성하는 것을 막음
    private SingletonService() {

    }

```
  
## 위 코드를 사용하여 싱글톤 패턴을 구현했을 때 문제점
- 구체 클래스에 의존하게 되기 때문에 DIP, OCP를 위반하게 된다.
- 모든 객체에 적용하면 코드가 길어진다.
- 자식클래스를 만들기가 어려우며, 유연성이 떨어진다.  

</br>

## 싱글톤 컨테이너
- 스프링 컨테이너는 싱글톤 패턴을 적용하지 않아도, 객체 인스턴스를 싱글톤으로 관리한다.
- @Configuration을 적용한 클래스에서는 한번 생성된 객체는 new를 통하여 새로 생성해도 같은 인스턴스를 공유한다.
  - 객체를 그대로 생성하는 것이 아닌 생성하려는 **객체를 상속받은 임의의 객체**를 스프링 컨테이너에서 생성하여 공유할 수 있도록 여 자바 코드를 회유함
  - @Bean만 사용해도 스프링 빈으로 등록이 되지만, 싱글톤을 보장하지 않는다.

</br>

## 싱글톤 패턴의 문제점
- 여러 클라이언트가 하나의 객체 인스턴스를 공유함
  - 상태를 유지하도록 설계하면 안됨
  - 공유되는 필드 내부의 값의 변경을 허용할 시 이상이 생길 수 있음
  - 공유 필드에 대한 관리를 주의깊게 설계해야함

</br>

## 

------

### assertThat 매서드 isEqualTo, isSameAs 차이점
- 자바 문법인 'equal'매서드와 '==' 연산자 차이이다
  -  == 연산자의 경우엔 비교대상의 값 자체를 비교하며, equal의 경우엔 대상의 주소값을 비교한다.
  -  int, char, bool등의 값에 의한 호출(call by value)이 이루어지는 타입은 == 연산자를 통해 비교가 가능하다.
  -  자바에서 String은 class이며, 이러한 class는 주소(참조)에 의한 호출(call by reference)이 이루어지는 타입으로 equal매서드를 통해 비교가 가능하다.

## static 키워드
- static을 통하여 정의한 맴버는 객체를 생성하지 않고 접근할 수 있다.(ex: 클래스명.멤버명)
- static을 사용하지 않아 객체를 생성해야만 접근할 수 있는 맴버는 인스턴스 맴버

## 자바의 메모리 구조
- static 영역 : 정적 맴버(메소드)를 저장하는 영역으로, 프로세스의 시작부터 종료까지 메모리에 남아있는다.
- stack 영역 : 값에 의한 호출이 이루어지는 타입의 데이터 정보와 참조에 의한 호출이 이루어지는 타입의 참조값(주소)를 저장하는 영역으로, 메소드가 실행될 때 할당받고, 메소드가 종료되면 해제된다.
- heap 영역 : 참조형 데이터(객체)를 저장하는 영역이며, new 키워드를 통해 인스턴스를 생성하면 생성된 객체는 heap에 저장되며, 주소는 stack영역에 저장된다. 
  - **가비지 컬렉션**에 의하여 사용되지 않는 인스턴스가 확인될 시, 메모리에서 제거된다.